{"ast":null,"code":"var _jsxFileName = \"E:\\\\Microsoft ENgae\\\\reactFrontend\\\\client-app\\\\src\\\\components\\\\MeetWindow.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport { createSocketConnectionInstance } from './Connection';\nimport { AppBar, Toolbar } from '@material-ui/core';\nimport MicIcon from '@material-ui/icons/Mic';\nimport MicOffIcon from '@material-ui/icons/MicOff';\nimport VideocamIcon from '@material-ui/icons/Videocam';\nimport VideocamOffIcon from '@material-ui/icons/VideocamOff';\nimport CallEndRoundedIcon from '@material-ui/icons/CallEndRounded';\nimport IconButton from '@material-ui/core/IconButton';\nimport Menu from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport MoreVertIcon from '@material-ui/icons/MoreVert';\nimport Fade from '@material-ui/core/Fade';\nimport PersonAddIcon from '@material-ui/icons/PersonAdd';\nimport { toast } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport './styles.css';\nimport { Widget, isWidgetOpened, addLinkSnippet, renderCustomComponent, deleteMessages, setBadgeCount } from 'react-chat-widget';\nimport 'react-chat-widget/lib/styles.css';\nimport UserPopup from './popup';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nlet socketInstance;\nlet msgCount;\n\nconst MeetWindow = props => {\n  _s();\n\n  const roomId = props.location.pathname.substring(1);\n  const [micStatus, setMic] = useState(true);\n  const [videoStatus, setCam] = useState(true);\n  const [recordStatus, setRecord] = useState(true);\n  const [screenShareStatus, setScreen] = useState(true);\n  const [screenPresenterStatus, setpresenter] = useState(false);\n  const [anchorEl, setAnchorEl] = React.useState(null);\n  const open = Boolean(anchorEl);\n  const [userName, setName] = useState('');\n  useEffect(() => {\n    socketInstance = createSocketConnectionInstance({\n      roomId: roomId,\n      micStatus: micStatus,\n      videoStatus: videoStatus,\n      recordStatus: recordStatus,\n      updatevalue: updatevalue\n    });\n    toast.configure();\n    deleteMessages();\n    addLinkSnippet({\n      title: 'Share this link to join the room',\n      link: `https://engaevideo.netlify.app/${roomId}`,\n      target: ''\n    });\n    msgCount = 0;\n  }, []);\n\n  const updatevalue = (property, val) => {\n    if (property === 'recordStatus') {\n      setRecord(val);\n    } else if (property === 'micStatus') {\n      setMic(val);\n    } else if (property === 'videoStatus') {\n      setCam(val);\n    } else if (property === 'screenPresenter') {\n      setpresenter(val);\n      setCam(!val);\n      socketInstance.videotoggle(val);\n    } else if (property === 'screenShareStatus') {\n      setScreen(val);\n    } else if (property === 'Incomingmessage') {\n      updateNewMessage(val);\n    } else if (property === 'newuserName') {\n      newuserjoined(val);\n    }\n  };\n\n  const exitcall = () => {\n    socketInstance.exitcall(userName);\n    props.history.push('/');\n  };\n\n  const mictoggle = () => {\n    socketInstance.mictoggle(micStatus);\n  };\n\n  const videotoggle = () => {\n    if (screenPresenterStatus) return;\n    socketInstance.videotoggle(videoStatus);\n  };\n\n  const screenShare = () => {\n    socketInstance.screenSharetoggle(screenShareStatus);\n  };\n\n  const recordScreen = () => {\n    socketInstance.recordScreen(recordStatus);\n  };\n\n  const copyToClipboard = () => {\n    var textField = document.createElement('textarea');\n    textField.innerText = roomId;\n    document.body.appendChild(textField);\n    textField.select();\n    document.execCommand('copy');\n    textField.remove();\n  };\n\n  const copyLink = () => {\n    copyToClipboard();\n    toast.info(`Room code copied to clipboard !`, {\n      position: toast.POSITION.TOP_CENTER\n    });\n  };\n\n  const handleClick = event => {\n    setAnchorEl(event.currentTarget);\n  };\n\n  const handleClose = () => {\n    setAnchorEl(null);\n  };\n\n  const handleNewUserMessage = Message => {\n    socketInstance.broadcastmessage(Message, userName);\n  };\n\n  const updateNewMessage = updateNewMessage => {\n    renderCustomComponent(Reply, updateNewMessage);\n    msgCount++;\n    console.log(`msg count: ${msgCount}`);\n    setBadgeCount(msgCount);\n  };\n\n  const newuserjoined = userName => {\n    renderCustomComponent(newUser, userName);\n  };\n\n  const newUser = props => {\n    return /*#__PURE__*/_jsxDEV(React.Fragment, {\n      children: [\" \", /*#__PURE__*/_jsxDEV(\"div\", {\n        class: \"chat-messages\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          class: \"new-user\",\n          children: [props.userName, \" \", props.messageBody]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 180,\n          columnNumber: 6\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 31\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 14\n    }, this);\n  };\n\n  const Reply = props => {\n    return /*#__PURE__*/_jsxDEV(React.Fragment, {\n      children: [\" \", /*#__PURE__*/_jsxDEV(\"div\", {\n        class: \"chat-messages\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          class: \"message\",\n          children: props.messageBody\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 189,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          class: \"from\",\n          children: [props.userName, \" \", new Date().toLocaleTimeString()]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 191,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 30\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 13\n    }, this);\n  };\n\n  const handleuserDetails = val => {\n    setName(val.name);\n    console.log('username', val.name);\n    socketInstance.newuserChat(val.name);\n  };\n\n  return /*#__PURE__*/_jsxDEV(React.Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      onClick: () => {\n        if (isWidgetOpened()) {\n          msgCount = 0;\n        }\n      },\n      children: /*#__PURE__*/_jsxDEV(Widget, {\n        handleNewUserMessage: handleNewUserMessage,\n        title: \"Chat here !\",\n        subtitle: \"\",\n        autofocus: false,\n        showTimeStamp: false,\n        setBadgeCount: msgCount\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 212,\n        columnNumber: 5\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(UserPopup, {\n      submitHandle: handleuserDetails\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 221,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"video-grid\",\n      children: [\" \", /*#__PURE__*/_jsxDEV(\"video\", {\n        id: \"screen-share\",\n        display: \"none\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 223,\n        columnNumber: 27\n      }, this), \" \"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 223,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"bottom-pad\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 224,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(AppBar, {\n      className: \"footbar-wrapper\",\n      position: \"bottom-fixed\",\n      color: \"primary\",\n      children: /*#__PURE__*/_jsxDEV(Toolbar, {\n        className: `footbar-tool`,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          onClick: mictoggle,\n          title: micStatus ? 'Disable Mic' : 'Enable Mic',\n          children: micStatus ? /*#__PURE__*/_jsxDEV(MicIcon, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 228,\n            columnNumber: 37\n          }, this) : /*#__PURE__*/_jsxDEV(MicOffIcon, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 228,\n            columnNumber: 48\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 227,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          onClick: exitcall,\n          children: /*#__PURE__*/_jsxDEV(CallEndRoundedIcon, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 231,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 230,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          onClick: videotoggle,\n          title: micStatus ? 'Disable Cam' : 'Enable Cam',\n          children: videoStatus ? /*#__PURE__*/_jsxDEV(VideocamIcon, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 235,\n            columnNumber: 39\n          }, this) : /*#__PURE__*/_jsxDEV(VideocamOffIcon, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 235,\n            columnNumber: 55\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 234,\n          columnNumber: 16\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          onClick: copyLink,\n          title: \"Add user\",\n          children: /*#__PURE__*/_jsxDEV(PersonAddIcon, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 238,\n            columnNumber: 19\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 237,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n          \"aria-label\": \"more\",\n          \"aria-controls\": \"long-menu\",\n          \"aria-haspopup\": \"true\",\n          onClick: handleClick,\n          children: /*#__PURE__*/_jsxDEV(MoreVertIcon, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 245,\n            columnNumber: 23\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 240,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(Menu, {\n          id: \"more\",\n          anchorEl: anchorEl,\n          keepMounted: true,\n          open: open,\n          onClose: handleClose,\n          TransitionComponent: Fade,\n          children: [/*#__PURE__*/_jsxDEV(MenuItem, {\n            onClick: screenShare,\n            children: !screenPresenterStatus && !screenShareStatus ? \"Disabled\" : screenShareStatus ? \"Share Screen\" : \"End ScreenShare\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 254,\n            columnNumber: 9\n          }, this), /*#__PURE__*/_jsxDEV(MenuItem, {\n            onClick: recordScreen,\n            children: recordStatus ? \"Start Recording\" : \"Stop Recording\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 255,\n            columnNumber: 9\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 247,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 226,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 6\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 210,\n    columnNumber: 12\n  }, this);\n};\n\n_s(MeetWindow, \"o3E44iVZcHKpvkLKLZ9E6s++6fA=\");\n\n_c = MeetWindow;\nexport default MeetWindow;\n/*\r\n launcher={handleToggle => getCustomLauncher(handleToggle)}\r\n \r\n\r\n\r\n\r\n\r\n handleToggle={handleToggle}\r\n\r\n\r\n <MenuItem onClick={copyLink}><PersonAddIcon/></MenuItem>\r\n <Box display=\"flex\" flexWrap=\"wrap\" justify-content=\"space-evenly\"  id=\"video-grid\"></Box>\r\n \r\n {`footbar-tool ${props.className}`}\r\n \r\n  <Button onClick={mictoggle}>mic</Button>\r\n  <Button onClick={videotoggle}>cam</Button>\r\n\r\n  <div  onClick={videotoggle} title={micStatus ? 'Disable Cam' : 'Enable Cam'}>\r\n\r\n   <Button onClick={exitcall}>exit</Button>\r\n\r\n    <Button onClick={screenShare}>screenShare</Button><Button onClick={recordScreen}>Record</Button> <Button onClick={copyLink}>add user</Button>\r\n\r\n\r\n    const useStyles = makeStyles({\r\n      root: {\r\n        background: 'linear-gradient(45deg, #FE6B8B 30%, #FF8E53 90%)',\r\n        border: 0,\r\n        borderRadius: 3,\r\n        boxShadow: '0 3px 5px 2px rgba(255, 105, 135, .3)',\r\n        color: 'white',\r\n        height: 48,\r\n        padding: '0 30px',\r\n      },\r\n      \r\n      \r\n\r\n      \r\n    });\r\n */\n\nvar _c;\n\n$RefreshReg$(_c, \"MeetWindow\");","map":{"version":3,"sources":["E:/Microsoft ENgae/reactFrontend/client-app/src/components/MeetWindow.jsx"],"names":["React","useState","useEffect","createSocketConnectionInstance","AppBar","Toolbar","MicIcon","MicOffIcon","VideocamIcon","VideocamOffIcon","CallEndRoundedIcon","IconButton","Menu","MenuItem","MoreVertIcon","Fade","PersonAddIcon","toast","Widget","isWidgetOpened","addLinkSnippet","renderCustomComponent","deleteMessages","setBadgeCount","UserPopup","socketInstance","msgCount","MeetWindow","props","roomId","location","pathname","substring","micStatus","setMic","videoStatus","setCam","recordStatus","setRecord","screenShareStatus","setScreen","screenPresenterStatus","setpresenter","anchorEl","setAnchorEl","open","Boolean","userName","setName","updatevalue","configure","title","link","target","property","val","videotoggle","updateNewMessage","newuserjoined","exitcall","history","push","mictoggle","screenShare","screenSharetoggle","recordScreen","copyToClipboard","textField","document","createElement","innerText","body","appendChild","select","execCommand","remove","copyLink","info","position","POSITION","TOP_CENTER","handleClick","event","currentTarget","handleClose","handleNewUserMessage","Message","broadcastmessage","Reply","console","log","newUser","messageBody","Date","toLocaleTimeString","handleuserDetails","name","newuserChat"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from 'react';\r\nimport {createSocketConnectionInstance} from './Connection';\r\nimport { AppBar, Toolbar } from '@material-ui/core';\r\nimport MicIcon from '@material-ui/icons/Mic';\r\nimport MicOffIcon from '@material-ui/icons/MicOff';\r\nimport VideocamIcon from '@material-ui/icons/Videocam';\r\nimport VideocamOffIcon from '@material-ui/icons/VideocamOff';\r\nimport CallEndRoundedIcon from '@material-ui/icons/CallEndRounded';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Menu from '@material-ui/core/Menu';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport MoreVertIcon from '@material-ui/icons/MoreVert';\r\nimport Fade from '@material-ui/core/Fade';\r\nimport PersonAddIcon from '@material-ui/icons/PersonAdd';\r\n\r\nimport { toast } from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\nimport './styles.css';\r\n\r\n\r\nimport { Widget,isWidgetOpened,addLinkSnippet, renderCustomComponent, deleteMessages, setBadgeCount} from 'react-chat-widget';\r\nimport 'react-chat-widget/lib/styles.css';\r\n\r\n\r\nimport UserPopup from './popup';\r\n\r\nlet socketInstance;\r\nlet msgCount;\r\nconst MeetWindow =(props)=>{\r\n  \r\n    const roomId = (props.location.pathname.substring(1));\r\n    \r\n    const [micStatus,setMic]=useState(true);\r\n    const [videoStatus,setCam] =useState(true);\r\n    const [recordStatus,setRecord]=useState(true);\r\n    const [screenShareStatus,setScreen]=useState(true);\r\n    const [screenPresenterStatus,setpresenter]=useState(false);\r\n    \r\n    const [anchorEl, setAnchorEl] = React.useState(null);\r\n    const open = Boolean(anchorEl);\r\n    const [userName,setName]=useState('');\r\n\r\n    useEffect(() => {\r\n       \r\n      socketInstance=(createSocketConnectionInstance({\r\n        roomId:roomId,\r\n        micStatus:micStatus,\r\n        videoStatus:videoStatus,\r\n        recordStatus:recordStatus,\r\n        updatevalue: updatevalue,\r\n      }))\r\n      toast.configure();\r\n      deleteMessages();\r\n      addLinkSnippet({ title: 'Share this link to join the room',\r\n      link: `https://engaevideo.netlify.app/${roomId}`,\r\n      target: ''});\r\n      msgCount=0;\r\n    },[])\r\n\r\n    const updatevalue=(property,val)=>{\r\n      if(property==='recordStatus')\r\n      {\r\n        setRecord(val);\r\n      }\r\n      else if(property==='micStatus')\r\n      {\r\n        setMic(val);\r\n      }\r\n      else if(property==='videoStatus')\r\n      {\r\n        setCam(val);\r\n      }\r\n      else if(property==='screenPresenter')\r\n      {\r\n        setpresenter(val);\r\n        setCam(!val);\r\n          socketInstance.videotoggle(val);\r\n        \r\n      }\r\n      else if(property==='screenShareStatus')\r\n      {\r\n        setScreen(val);\r\n       \r\n      }\r\n      else if(property==='Incomingmessage')\r\n      {\r\n        updateNewMessage(val);\r\n        \r\n      }\r\n      else if(property==='newuserName')\r\n      {\r\n        newuserjoined(val);\r\n      }\r\n\r\n    }\r\n\r\n    const exitcall=()=>{\r\n      socketInstance.exitcall(userName);\r\n      props.history.push('/');\r\n    }\r\n\r\n\r\n\r\n    const mictoggle=()=>{\r\n      socketInstance.mictoggle(micStatus)\r\n\r\n\r\n    }\r\n\r\n\r\n    const videotoggle=()=>{\r\n      if(screenPresenterStatus)\r\n      return;\r\n\r\n      socketInstance.videotoggle(videoStatus);\r\n\r\n    }\r\n   \r\n\r\n    const screenShare=()=>{\r\n      socketInstance.screenSharetoggle(screenShareStatus);\r\n     \r\n      \r\n    }\r\n\r\n    const recordScreen=()=>{\r\n      socketInstance.recordScreen(recordStatus);\r\n\r\n    }\r\n\r\n    const copyToClipboard=() => {\r\n      var textField = document.createElement('textarea')\r\n      textField.innerText = roomId;\r\n      document.body.appendChild(textField)\r\n      textField.select()\r\n      document.execCommand('copy')\r\n      textField.remove()\r\n    }\r\n\r\n    const copyLink=()=>{\r\n    \r\n     copyToClipboard();\r\n     \r\n      toast.info(`Room code copied to clipboard !`,{position: toast.POSITION.TOP_CENTER});\r\n    }\r\n    \r\n    \r\n\r\n    const handleClick = (event) => {\r\n      setAnchorEl(event.currentTarget);\r\n    };\r\n  \r\n    const handleClose = () => {\r\n      setAnchorEl(null);\r\n    };\r\n  \r\n    const handleNewUserMessage=(Message)=>{\r\n    \r\n      socketInstance.broadcastmessage(Message,userName);\r\n      \r\n    }\r\n    const updateNewMessage=(updateNewMessage)=>{   \r\n     renderCustomComponent(Reply,updateNewMessage); \r\n    msgCount++;\r\n     console.log(`msg count: ${msgCount}`);\r\n     setBadgeCount(msgCount);\r\n\r\n    \r\n    }\r\n\r\n    const newuserjoined=(userName)=>{\r\n      renderCustomComponent(newUser,userName);\r\n   \r\n    }\r\n  \r\n    const newUser=(props)=>{\r\n      return(<React.Fragment> <div class=\"chat-messages\">\r\n     \r\n    \r\n     <div class=\"new-user\">{props.userName} {props.messageBody}</div>\r\n   </div>\r\n </React.Fragment>\r\n\r\n     )\r\n\r\n    }\r\n   const Reply=(props)=>{\r\n     return(<React.Fragment> <div class=\"chat-messages\">\r\n     <div class=\"message\">{props.messageBody}</div>\r\n    \r\n     <div class=\"from\">{props.userName} {new Date().toLocaleTimeString()}</div>\r\n   </div>\r\n </React.Fragment>\r\n\r\n     )\r\n  \r\n   }\r\n\r\n\r\n \r\n\r\n\r\n   const handleuserDetails=(val)=>{\r\n    setName(val.name);\r\n    console.log('username',val.name);\r\n        socketInstance.newuserChat(val.name);\r\n\r\n   }\r\n\r\n    return(<React.Fragment>\r\n    <div onClick={()=>{if(isWidgetOpened()){ msgCount=0;}}}>\r\n    <Widget handleNewUserMessage={handleNewUserMessage}  \r\n            title=\"Chat here !\"\r\n          subtitle=\"\" \r\n            autofocus={false}\r\n            showTimeStamp={false}\r\n            setBadgeCount={msgCount}\r\n          \r\n          />\r\n    </div>\r\n    <UserPopup submitHandle={handleuserDetails}></UserPopup>\r\n    \r\n    <div id=\"video-grid\"> <video id=\"screen-share\" display=\"none\"/> </div>\r\n    <div id=\"bottom-pad\"></div>\r\n     <AppBar className=\"footbar-wrapper\" position=\"bottom-fixed\" color=\"primary\" >\r\n                <Toolbar className={`footbar-tool`}>\r\n                <div  onClick={mictoggle} title={micStatus ? 'Disable Mic' : 'Enable Mic'}>\r\n                        {micStatus ?<MicIcon/>:<MicOffIcon/>}\r\n                </div>\r\n                <div  onClick={exitcall} >\r\n                        <CallEndRoundedIcon/>\r\n                </div>\r\n              \r\n               <div  onClick={videotoggle} title={micStatus ? 'Disable Cam' : 'Enable Cam'}>\r\n                        {videoStatus ?<VideocamIcon/>:<VideocamOffIcon/>}\r\n                </div>  \r\n                <div onClick={copyLink} title='Add user'>\r\n                 {<PersonAddIcon/>}\r\n                </div>\r\n                <IconButton\r\n                    aria-label=\"more\"\r\n                    aria-controls=\"long-menu\"\r\n                    aria-haspopup=\"true\"\r\n                    onClick={handleClick}>\r\n                      <MoreVertIcon />\r\n                </IconButton>\r\n                <Menu\r\n                  id=\"more\"\r\n                  anchorEl={anchorEl}\r\n                  keepMounted\r\n                  open={open}\r\n                  onClose={handleClose}\r\n                  TransitionComponent={Fade}>\r\n        <MenuItem onClick={screenShare}>{(!screenPresenterStatus && !screenShareStatus)?\"Disabled\":(screenShareStatus)?\"Share Screen\":\"End ScreenShare\"}</MenuItem>\r\n        <MenuItem onClick={recordScreen}>{(recordStatus)?\"Start Recording\":\"Stop Recording\"}</MenuItem>\r\n       \r\n      </Menu>\r\n\r\n     \r\n                </Toolbar>\r\n    \r\n               \r\n            </AppBar>\r\n       \r\n        \r\n         \r\n          \r\n          \r\n            </React.Fragment>)\r\n};\r\n\r\nexport default MeetWindow;\r\n\r\n/*\r\n launcher={handleToggle => getCustomLauncher(handleToggle)}\r\n \r\n\r\n\r\n\r\n\r\n handleToggle={handleToggle}\r\n\r\n\r\n <MenuItem onClick={copyLink}><PersonAddIcon/></MenuItem>\r\n <Box display=\"flex\" flexWrap=\"wrap\" justify-content=\"space-evenly\"  id=\"video-grid\"></Box>\r\n \r\n {`footbar-tool ${props.className}`}\r\n \r\n  <Button onClick={mictoggle}>mic</Button>\r\n  <Button onClick={videotoggle}>cam</Button>\r\n\r\n  <div  onClick={videotoggle} title={micStatus ? 'Disable Cam' : 'Enable Cam'}>\r\n\r\n   <Button onClick={exitcall}>exit</Button>\r\n\r\n    <Button onClick={screenShare}>screenShare</Button><Button onClick={recordScreen}>Record</Button> <Button onClick={copyLink}>add user</Button>\r\n\r\n\r\n    const useStyles = makeStyles({\r\n      root: {\r\n        background: 'linear-gradient(45deg, #FE6B8B 30%, #FF8E53 90%)',\r\n        border: 0,\r\n        borderRadius: 3,\r\n        boxShadow: '0 3px 5px 2px rgba(255, 105, 135, .3)',\r\n        color: 'white',\r\n        height: 48,\r\n        padding: '0 30px',\r\n      },\r\n      \r\n      \r\n\r\n      \r\n    });\r\n */"]},"metadata":{},"sourceType":"module"}